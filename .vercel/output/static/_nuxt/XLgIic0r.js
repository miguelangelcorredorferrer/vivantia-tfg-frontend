import{_ as y}from"./YHwIe9Gn.js";import{u as h,r as i,c as r,o as l,a as t,h as w,i as _,v as k,m as S,t as C,d as m,H as E,j as V,b as N,w as j}from"./Z3C1zjOC.js";import{u as B}from"./DPZQ8nY_.js";const M={key:0},z={key:0,class:"text-red-500 text-sm mt-1"},T=["disabled"],H={key:0},R={key:1,class:"flex items-center justify-center"},D={key:1,class:"text-center"},F={class:"mt-6 text-center"},I={class:"text-sm text-gray-600"},P={__name:"forgot-password",setup(L){const f=h(),{toast:v}=B(),o=i(""),s=i({}),n=i(!1),u=i(!1),p=()=>(s.value={},o.value.trim()?/\S+@\S+\.\S+/.test(o.value)||(s.value.email="El email no es válido"):s.value.email="El email es obligatorio",Object.keys(s.value).length===0),g=async()=>{var c,e;if(p())try{n.value=!0;const a=await f.forgotPassword(o.value);v.success(a.msg||"Se ha enviado un enlace de recuperación a tu email"),u.value=!0,o.value=""}catch(a){console.error("Error en forgot password:",a);const d=((e=(c=a.response)==null?void 0:c.data)==null?void 0:e.msg)||"Error al enviar el email de recuperación";v.error(d)}finally{n.value=!1}},x=()=>{s.value.email&&delete s.value.email},b=()=>{u.value=!1,o.value="",s.value={}};return(c,e)=>{const a=y;return l(),r("div",null,[e[6]||(e[6]=t("div",{class:"text-center mb-6"},[t("h2",{class:"text-2xl font-bold text-gray-800 mb-2"},"Recuperar Contraseña"),t("p",{class:"text-gray-600"},"Te enviaremos instrucciones a tu email")],-1)),u.value?(l(),r("div",D,[e[3]||(e[3]=V('<div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div><h3 class="text-lg font-semibold text-gray-800 mb-2">¡Email enviado!</h3><p class="text-gray-600 mb-6"> Revisa tu bandeja de entrada y sigue las instrucciones para restablecer tu contraseña. </p>',3)),t("button",{onClick:b,class:"text-green-600 hover:text-green-700 font-medium transition-colors duration-200"}," Enviar a otro email ")])):(l(),r("div",M,[t("form",{onSubmit:E(g,["prevent"]),class:"space-y-4"},[t("div",null,[e[1]||(e[1]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"}," Correo electrónico ",-1)),w(t("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=d=>o.value=d),type:"email",placeholder:"tu@email.com",class:S(["w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",{"border-red-500":s.value.email}]),onInput:x},null,34),[[k,o.value]]),s.value.email?(l(),r("p",z,C(s.value.email),1)):_("",!0)]),t("button",{type:"submit",disabled:n.value,class:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[n.value?(l(),r("span",R,e[2]||(e[2]=[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),m(" Enviando... ")]))):(l(),r("span",H,"Enviar instrucciones"))],8,T)],32)])),t("div",F,[t("p",I,[e[5]||(e[5]=m(" ¿Recordaste tu contraseña? ")),N(a,{to:"/auth/login",class:"text-green-600 hover:text-green-700 font-medium transition-colors duration-200"},{default:j(()=>e[4]||(e[4]=[m(" Iniciar sesión ")])),_:1,__:[4]})])])])}}};export{P as default};
