import{u as te}from"./DPZQ8nY_.js";import{u as le}from"./6yrW6Ic0.js";import{_ as F,p as P,g as ae,l as q,A as b,o as c,w as M,a as e,h as $,B as w,k as u,v as A,c as S,F as G,x as oe,t as p,s as X,i as D,m as k,H as J,d as V,G as de,r as Q,b as E,K as ce,u as ue,q as me}from"./Z3C1zjOC.js";import{g as C}from"./DYYJ9xn1.js";import{B as se}from"./B0aUQyeA.js";import{_ as ne}from"./YHwIe9Gn.js";import"./DTkYgPEM.js";var fe=typeof global=="object"&&global&&global.Object===Object&&global,ge=typeof self=="object"&&self&&self.Object===Object&&self,ie=fe||ge||Function("return this")(),U=ie.Symbol,re=Object.prototype,pe=re.hasOwnProperty,xe=re.toString,B=U?U.toStringTag:void 0;function ye(t){var r=pe.call(t,B),l=t[B];try{t[B]=void 0;var g=!0}catch{}var x=xe.call(t);return g&&(r?t[B]=l:delete t[B]),x}var be=Object.prototype,ve=be.toString;function he(t){return ve.call(t)}var _e="[object Null]",we="[object Undefined]",Y=U?U.toStringTag:void 0;function Ce(t){return t==null?t===void 0?we:_e:Y&&Y in Object(t)?ye(t):he(t)}function Se(t){return t!=null&&typeof t=="object"}var ke="[object Symbol]";function Te(t){return typeof t=="symbol"||Se(t)&&Ce(t)==ke}var $e=/\s/;function je(t){for(var r=t.length;r--&&$e.test(t.charAt(r)););return r}var He=/^\s+/;function Ae(t){return t&&t.slice(0,je(t)+1).replace(He,"")}function R(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}var Z=NaN,Ve=/^[-+]0x[0-9a-f]+$/i,Ee=/^0b[01]+$/i,Ie=/^0o[0-7]+$/i,Oe=parseInt;function ee(t){if(typeof t=="number")return t;if(Te(t))return Z;if(R(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=R(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=Ae(t);var l=Ee.test(t);return l||Ie.test(t)?Oe(t.slice(2),l?2:8):Ve.test(t)?Z:+t}var W=function(){return ie.Date.now()},Ne="Expected a function",Be=Math.max,Me=Math.min;function Fe(t,r,l){var g,x,n,d,s,i,h=0,v=!1,o=!1,a=!0;if(typeof t!="function")throw new TypeError(Ne);r=ee(r)||0,R(l)&&(v=!!l.leading,o="maxWait"in l,n=o?Be(ee(l.maxWait)||0,r):n,a="trailing"in l?!!l.trailing:a);function I(y){var T=g,N=x;return g=x=void 0,h=y,d=t.apply(N,T),d}function L(y){return h=y,s=setTimeout(j,r),v?I(y):d}function _(y){var T=y-i,N=y-h,K=r-T;return o?Me(K,n-N):K}function m(y){var T=y-i,N=y-h;return i===void 0||T>=r||T<0||o&&N>=n}function j(){var y=W();if(m(y))return O(y);s=setTimeout(j,_(y))}function O(y){return s=void 0,a&&g?I(y):(g=x=void 0,d)}function f(){s!==void 0&&clearTimeout(s),h=0,g=i=x=s=void 0}function H(){return s===void 0?d:O(W())}function z(){var y=W(),T=m(y);if(g=arguments,x=this,i=y,T){if(s===void 0)return L(i);if(o)return clearTimeout(s),s=setTimeout(j,r),I(i)}return s===void 0&&(s=setTimeout(j,r)),d}return z.cancel=f,z.flush=H,z}const Pe={class:"space-y-4"},Ue={class:"relative"},De={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ze=["value"],We={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Re={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ge={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-2 sm:space-y-0 pt-4 border-t border-gray-600"},Ke={class:"flex items-center space-x-4"},Xe={class:"text-sm text-gray-300"},Je={key:0,class:"flex items-center space-x-2"},Qe=["disabled"],Ye={class:"flex items-center space-x-2"},Ze={__name:"CropsFilter",props:{resultsCount:{type:Number,default:0},categories:{type:Array,default:()=>[]}},emits:["filters-changed"],setup(t,{emit:r}){const l=t,g=r,x=P(()=>["Todas",...l.categories]),n=ae({name:"",category:"Todas",session:"",minSoilHumidity:"",maxSoilHumidity:"",minAirHumidity:"",maxAirHumidity:"",maxTemperature:""}),d=P(()=>n.name!==""||n.category!=="Todas"||n.session!==""||n.minSoilHumidity!==""||n.maxSoilHumidity!==""||n.minAirHumidity!==""||n.maxAirHumidity!==""||n.maxTemperature!==""),s=()=>{g("filters-changed",{...n})},i=Fe(s,300),h=()=>{n.name="",n.category="Todas",n.session="",n.minSoilHumidity="",n.maxSoilHumidity="",n.minAirHumidity="",n.maxAirHumidity="",n.maxTemperature="",s()};return q(()=>n.category,s),q(()=>n.session,s),(v,o)=>(c(),b(se,{title:"Filtros de Cultivos"},{default:M(()=>[e("div",Pe,[e("div",null,[o[14]||(o[14]=e("label",{for:"name-filter",class:"block text-sm font-medium text-white mb-2"}," Buscar por nombre ",-1)),e("div",Ue,[e("div",De,[(c(),b(w(u(C)("search")),{class:"h-5 w-5 text-gray-400"}))]),$(e("input",{id:"name-filter","onUpdate:modelValue":o[0]||(o[0]=a=>n.name=a),type:"text",class:"w-full pl-10 pr-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:"Ej: Tomate, Lechuga...",onInput:o[1]||(o[1]=(...a)=>u(i)&&u(i)(...a))},null,544),[[A,n.name]])])]),e("div",Le,[e("div",null,[o[15]||(o[15]=e("label",{for:"category-filter",class:"block text-sm font-medium text-white mb-2"}," Categoría ",-1)),$(e("select",{id:"category-filter","onUpdate:modelValue":o[2]||(o[2]=a=>n.category=a),class:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",onChange:s},[(c(!0),S(G,null,oe(x.value,a=>(c(),S("option",{key:a,value:a},p(a),9,ze))),128))],544),[[X,n.category]])]),e("div",null,[o[17]||(o[17]=e("label",{for:"session-filter",class:"block text-sm font-medium text-white mb-2"}," Temporada ",-1)),$(e("select",{id:"session-filter","onUpdate:modelValue":o[3]||(o[3]=a=>n.session=a),class:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",onChange:s},o[16]||(o[16]=[e("option",{value:""},"Todas",-1),e("option",{value:"Primavera"},"Primavera",-1),e("option",{value:"Verano"},"Verano",-1),e("option",{value:"Otoño"},"Otoño",-1),e("option",{value:"Invierno"},"Invierno",-1),e("option",{value:"Primavera/Verano"},"Primavera/Verano",-1),e("option",{value:"Verano/Otoño"},"Verano/Otoño",-1),e("option",{value:"Otoño/Invierno"},"Otoño/Invierno",-1),e("option",{value:"Invierno/Primavera"},"Invierno/Primavera",-1),e("option",{value:"Todo el año"},"Todo el año",-1)]),544),[[X,n.session]])])]),e("div",We,[e("div",null,[o[18]||(o[18]=e("label",{for:"min-soil-humidity-filter",class:"block text-sm font-medium text-blue-300 mb-2"}," 🌱 Humedad Suelo Mín. (%) ",-1)),$(e("input",{id:"min-soil-humidity-filter","onUpdate:modelValue":o[4]||(o[4]=a=>n.minSoilHumidity=a),type:"number",min:"0",max:"100",class:"w-full px-4 py-3 bg-gray-700 border border-blue-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Ej: 40",onInput:o[5]||(o[5]=(...a)=>u(i)&&u(i)(...a))},null,544),[[A,n.minSoilHumidity]])]),e("div",null,[o[19]||(o[19]=e("label",{for:"max-soil-humidity-filter",class:"block text-sm font-medium text-blue-300 mb-2"}," 🌱 Humedad Suelo Máx. (%) ",-1)),$(e("input",{id:"max-soil-humidity-filter","onUpdate:modelValue":o[6]||(o[6]=a=>n.maxSoilHumidity=a),type:"number",min:"0",max:"100",class:"w-full px-4 py-3 bg-gray-700 border border-blue-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"Ej: 80",onInput:o[7]||(o[7]=(...a)=>u(i)&&u(i)(...a))},null,544),[[A,n.maxSoilHumidity]])])]),e("div",qe,[e("div",null,[o[20]||(o[20]=e("label",{for:"min-air-humidity-filter",class:"block text-sm font-medium text-cyan-300 mb-2"}," 💨 Humedad Aire Mín. (%) ",-1)),$(e("input",{id:"min-air-humidity-filter","onUpdate:modelValue":o[8]||(o[8]=a=>n.minAirHumidity=a),type:"number",min:"0",max:"100",class:"w-full px-4 py-3 bg-gray-700 border border-cyan-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-colors",placeholder:"Ej: 50",onInput:o[9]||(o[9]=(...a)=>u(i)&&u(i)(...a))},null,544),[[A,n.minAirHumidity]])]),e("div",null,[o[21]||(o[21]=e("label",{for:"max-air-humidity-filter",class:"block text-sm font-medium text-cyan-300 mb-2"}," 💨 Humedad Aire Máx. (%) ",-1)),$(e("input",{id:"max-air-humidity-filter","onUpdate:modelValue":o[10]||(o[10]=a=>n.maxAirHumidity=a),type:"number",min:"0",max:"100",class:"w-full px-4 py-3 bg-gray-700 border border-cyan-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-colors",placeholder:"Ej: 85",onInput:o[11]||(o[11]=(...a)=>u(i)&&u(i)(...a))},null,544),[[A,n.maxAirHumidity]])])]),e("div",Re,[e("div",null,[o[22]||(o[22]=e("label",{for:"max-temp-filter",class:"block text-sm font-medium text-red-300 mb-2"}," 🌡️ Temp. Máx. (°C) ",-1)),$(e("input",{id:"max-temp-filter","onUpdate:modelValue":o[12]||(o[12]=a=>n.maxTemperature=a),type:"number",min:"0",max:"50",class:"w-full px-4 py-3 bg-gray-700 border border-red-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors",placeholder:"Ej: 30",onInput:o[13]||(o[13]=(...a)=>u(i)&&u(i)(...a))},null,544),[[A,n.maxTemperature]])]),o[23]||(o[23]=e("div",null,null,-1))]),e("div",Ge,[e("div",Ke,[e("span",Xe,p(t.resultsCount)+" cultivo"+p(t.resultsCount!==1?"s":"")+" encontrado"+p(t.resultsCount!==1?"s":""),1),d.value?(c(),S("div",Je,[(c(),b(w(u(C)("filter")))),o[24]||(o[24]=e("span",{class:"text-xs text-green-500 font-medium"},"Filtros activos",-1))])):D("",!0)]),e("button",{onClick:h,class:k(["px-4 py-2 text-sm font-medium text-gray-400 hover:text-white border border-gray-600 hover:border-gray-500 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500",{"opacity-50 cursor-not-allowed":!d.value}]),disabled:!d.value},[e("div",Ye,[(c(),b(w(u(C)("clearFilters")))),o[25]||(o[25]=e("span",null,"Limpiar filtros",-1))])],10,Qe)])])]),_:1}))}},et=F(Ze,[["__scopeId","data-v-bbb9ca77"]]),tt={class:"relative inline-flex items-center"},ot=["disabled","aria-checked","aria-label"],st={__name:"CropSwitch",props:{modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},label:{type:String,default:""}},emits:["update:modelValue","change"],setup(t,{emit:r}){const l=t,g=r,x=()=>{if(l.disabled)return;const n=!l.modelValue;g("update:modelValue",n),g("change",n)};return(n,d)=>(c(),S("div",tt,[e("button",{type:"button",class:k(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-800",t.modelValue?"bg-green-600 hover:bg-green-700":"bg-gray-600 hover:bg-gray-500",t.disabled?"opacity-50 cursor-not-allowed":""]),disabled:t.disabled,onClick:x,"aria-checked":t.modelValue,"aria-label":t.label,role:"switch"},[e("span",{class:k(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow-lg ring-0 transition duration-200 ease-in-out",t.modelValue?"translate-x-5":"translate-x-0"])},[e("span",{class:k(["absolute inset-0 flex h-full w-full items-center justify-center transition-opacity duration-200 ease-in-out",t.modelValue?"opacity-0":"opacity-100"])},[(c(),b(w(u(C)("close"))))],2),e("span",{class:k(["absolute inset-0 flex h-full w-full items-center justify-center transition-opacity duration-200 ease-in-out",t.modelValue?"opacity-100":"opacity-0"])},[(c(),b(w(u(C)("check"))))],2)],2)],10,ot)]))}},nt=F(st,[["__scopeId","data-v-77809bd2"]]),it={class:"flex min-h-full items-center justify-center p-4"},rt={class:"bg-red-900/20 border-b border-red-500/30 px-6 py-4"},lt={class:"flex items-center"},at={class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100"},dt={class:"px-6 py-4"},ct={class:"text-sm text-gray-300 text-center mb-4"},ut={class:"font-semibold text-white"},mt={class:"bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-3 mb-4"},ft={class:"flex items-start"},gt={class:"bg-gray-700/30 px-6 py-4 flex flex-col sm:flex-row-reverse gap-3"},pt={__name:"ConfirmDeleteModal",props:{isVisible:{type:Boolean,default:!1},cropName:{type:String,default:""}},emits:["confirm","cancel"],setup(t,{emit:r}){const l=r,g=()=>{l("confirm")},x=()=>{l("cancel")};return(n,d)=>t.isVisible?(c(),S("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:J(x,["self"])},[d[7]||(d[7]=e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),e("div",it,[e("div",{class:"relative transform overflow-hidden rounded-lg bg-gray-800 border border-gray-600 shadow-xl transition-all w-full max-w-md",onClick:d[0]||(d[0]=J(()=>{},["stop"]))},[e("div",rt,[e("div",lt,[e("div",at,[(c(),b(w(u(C)("danger"))))])])]),e("div",dt,[d[4]||(d[4]=e("h3",{class:"text-lg font-medium text-white text-center mb-2"}," Confirmar Eliminación ",-1)),e("p",ct,[d[1]||(d[1]=V(" ¿Estás seguro de que quieres eliminar el cultivo ")),e("span",ut,'"'+p(t.cropName)+'"',1),d[2]||(d[2]=V("? "))]),e("div",mt,[e("div",ft,[(c(),b(w(u(C)("warning")))),d[3]||(d[3]=e("p",{class:"text-xs text-yellow-300"}," Esta acción no se puede deshacer. Se eliminará permanentemente el cultivo y toda su configuración. ",-1))])])]),e("div",gt,[e("button",{onClick:g,class:"w-full sm:w-auto inline-flex justify-center items-center px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-800 rounded-lg transition-colors"},[(c(),b(w(u(C)("delete")),{class:"w-4 h-4 mr-2"})),d[5]||(d[5]=V(" Sí, eliminar "))]),e("button",{onClick:x,class:"w-full sm:w-auto inline-flex justify-center items-center px-4 py-2 text-sm font-medium text-gray-300 hover:text-white bg-gray-600 hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-800 rounded-lg transition-colors"},[(c(),b(w(u(C)("cancel")))),d[6]||(d[6]=V(" Cancelar "))])])])])])):D("",!0)}},xt=F(pt,[["__scopeId","data-v-dafd716f"]]),yt={class:"flex items-center space-x-4"},bt={class:"flex items-center space-x-2"},vt={class:"text-sm text-gray-300 font-bold"},ht={key:0,class:"text-xs text-green-500 bg-green-900/30 px-2 py-1 rounded-full"},_t={class:"flex items-center space-x-1 text-xs text-gray-500 bg-gray-800 px-2 py-1 rounded"},wt={class:"overflow-x-auto"},Ct={key:0,class:"text-center py-12"},St={key:1,class:"w-full text-sm text-left"},kt={class:"divide-y divide-gray-600"},Tt={class:"px-6 py-4"},$t={class:"flex items-center"},jt={class:"flex-shrink-0 w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-4"},Ht={class:"font-medium text-white"},At={class:"text-sm text-gray-400"},Vt={class:"px-6 py-4 text-gray-300"},Et={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-700 text-gray-300"},It={class:"px-6 py-4 text-center"},Ot={class:"text-gray-300"},Nt={class:"text-sm font-medium"},Bt={class:"px-6 py-4 text-center"},Mt={class:"text-gray-300"},Ft={class:"text-sm font-medium"},Pt={class:"px-6 py-4 text-center"},Ut={class:"text-gray-300"},Dt={class:"text-sm font-medium"},Lt={class:"px-6 py-4 text-center"},zt={class:"text-gray-300"},Wt={class:"text-sm font-medium"},qt={class:"px-6 py-4 text-center"},Rt={class:"text-gray-300"},Gt={class:"text-sm font-medium"},Kt={class:"px-6 py-4 text-center"},Xt={class:"flex items-center justify-center"},Jt={class:"px-6 py-4 text-center"},Qt={class:"flex flex-col items-center space-y-2"},Yt={class:"px-6 py-4"},Zt={class:"flex items-center justify-center space-x-4"},eo={class:"flex flex-col items-center space-y-1"},to=["onClick"],oo={class:"flex flex-col items-center space-y-1"},so=["onClick"],no={class:"flex flex-col items-center space-y-1"},io=["onClick","disabled"],ro={__name:"CropsTable",props:{crops:{type:Array,default:()=>[]}},emits:["toggle-selection","delete-crop"],setup(t,{emit:r}){const l=t,g=r,x=de(),n=te(),d=Q(!1),s=Q(null),i=P(()=>l.crops.find(_=>_.selected));P(()=>!!i.value);const h=(_,m)=>{g("toggle-selection",{cropId:_,isSelected:m})},v=_=>{x.push(`/cultivos/ver/${_.id}`)},o=_=>{x.push(`/cultivos/editar/${_.id}`)},a=_=>{if(_.selected){n.warning("No puedes eliminar un cultivo que está seleccionado");return}s.value=_,d.value=!0},I=()=>{if(s.value){const _=s.value.name;d.value=!1,g("delete-crop",s.value.id),n.cropDeleted(_),s.value=null}},L=()=>{d.value=!1,s.value=null};return(_,m)=>{const j=ne;return c(),b(se,{title:"Cultivos Disponibles"},{"header-actions":M(()=>[e("div",yt,[e("div",bt,[e("span",vt,"Total: "+p(t.crops.length),1),i.value?(c(),S("span",ht,p(i.value.name)+" seleccionado ",1)):D("",!0)]),e("div",_t,[(c(),b(w(u(C)("info")))),m[0]||(m[0]=e("span",null,"Selección automática: al seleccionar un cultivo se deseleccionan los demás",-1))])])]),default:M(()=>{var O;return[e("div",wt,[t.crops.length===0?(c(),S("div",Ct,[(c(),b(w(u(C)("plantConfig")),{class:"mx-auto mb-4 opacity-50"})),m[2]||(m[2]=e("h3",{class:"text-lg font-medium text-white mb-2"},"No tienes cultivos registrados",-1)),m[3]||(m[3]=e("p",{class:"text-gray-400"},"Crea tu primer cultivo para comenzar a usar el sistema de riego",-1)),E(j,{to:"/cultivos/agregar",class:"inline-flex items-center px-4 py-2 mt-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-medium rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all duration-200"},{default:M(()=>m[1]||(m[1]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),V(" Crear Primer Cultivo ")])),_:1,__:[1]})])):(c(),S("table",St,[m[11]||(m[11]=e("thead",{class:"text-xs text-gray-300 uppercase bg-gray-800/50 border-b border-gray-600"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-4 font-medium"},"Cultivo"),e("th",{scope:"col",class:"px-6 py-4 font-medium"},"Categoría"),e("th",{scope:"col",class:"px-6 py-4 font-medium text-center"},"Temporada"),e("th",{scope:"col",class:"px-6 py-4 font-medium text-center"},"Hum. Suelo (%)"),e("th",{scope:"col",class:"px-6 py-4 font-medium text-center"},"Hum. Aire (%)"),e("th",{scope:"col",class:"px-6 py-4 font-medium text-center"},"Temp. Máx. (°C)"),e("th",{scope:"col",class:"px-6 py-4 font-medium text-center"},"Crecimiento (días)"),e("th",{scope:"col",class:"px-6 py-4 font-medium text-center"},"Estado Bomba"),e("th",{scope:"col",class:"px-6 py-4 font-medium text-center"},"Seleccionado"),e("th",{scope:"col",class:"px-6 py-4 font-medium text-center"},"Acciones")])],-1)),e("tbody",kt,[(c(!0),S(G,null,oe(t.crops,f=>(c(),S("tr",{key:f.id,class:k(["hover:bg-gray-800/30 transition-colors duration-150",{"bg-green-900/20 border-green-500/30":f.selected}])},[e("td",Tt,[e("div",$t,[e("div",jt,[(c(),b(w(u(C)("plant")),{class:"w-6 h-6 text-green-600"}))]),e("div",null,[e("div",Ht,p(f.name),1),e("div",At,p(f.description),1)])])]),e("td",Vt,[e("span",Et,p(f.category),1)]),e("td",It,[e("div",Ot,[e("div",Nt,p(f.session||"N/A"),1),m[4]||(m[4]=e("div",{class:"text-xs text-gray-500"},"Temporada",-1))])]),e("td",Bt,[e("div",Mt,[e("div",Ft,p(f.soil_humidity_min)+"% - "+p(f.soil_humidity_max)+"%",1),m[5]||(m[5]=e("div",{class:"text-xs text-gray-500"},"Suelo",-1))])]),e("td",Pt,[e("div",Ut,[e("div",Dt,p(f.air_humidity_min)+"% - "+p(f.air_humidity_max)+"%",1),m[6]||(m[6]=e("div",{class:"text-xs text-gray-500"},"Aire",-1))])]),e("td",Lt,[e("div",zt,[e("div",Wt,p(f.temperature_max)+"°C",1),m[7]||(m[7]=e("div",{class:"text-xs text-gray-500"},"Máximo",-1))])]),e("td",qt,[e("div",Rt,[e("div",Gt,p(f.growth_days||"N/A"),1),m[8]||(m[8]=e("div",{class:"text-xs text-gray-500"},"días",-1))])]),e("td",Kt,[e("div",Xt,[e("div",{class:k(["flex items-center space-x-2 px-3 py-1 rounded-full text-xs font-medium",f.waterPumpActive?"bg-blue-900/30 text-blue-400 border border-blue-500/30":"bg-gray-700 text-gray-400 border border-gray-600"])},[e("div",{class:k(["w-2 h-2 rounded-full",f.waterPumpActive?"bg-blue-400 animate-pulse":"bg-gray-500"])},null,2),e("span",null,p(f.waterPumpActive?"Activa":"Inactiva"),1)],2)])]),e("td",Jt,[e("div",Qt,[E(nt,{"model-value":f.selected,label:`Seleccionar ${f.name}`,onChange:H=>h(f.id,H)},null,8,["model-value","label","onChange"]),e("span",{class:k(["text-xs font-medium",f.selected?"text-green-400":"text-gray-500"])},p(f.selected?"Seleccionado":"No seleccionado"),3)])]),e("td",Yt,[e("div",Zt,[e("div",eo,[e("button",{onClick:H=>v(f),class:"p-2 text-gray-400 hover:text-purple-400 hover:bg-purple-900/20 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-purple-500",title:"Ver detalles del cultivo"},[(c(),b(w(u(C)("notes"))))],8,to),m[9]||(m[9]=e("span",{class:"text-xs text-gray-400"},"Ver",-1))]),e("div",oo,[e("button",{onClick:H=>o(f),class:"p-2 text-gray-400 hover:text-blue-400 hover:bg-blue-900/20 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Editar cultivo"},[(c(),b(w(u(C)("edit"))))],8,so),m[10]||(m[10]=e("span",{class:"text-xs text-gray-400"},"Editar",-1))]),e("div",no,[e("button",{onClick:H=>a(f),class:k(["p-2 text-gray-400 hover:text-red-400 hover:bg-red-900/20 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-red-500",{"opacity-50 cursor-not-allowed":f.isSelected}]),title:"Eliminar cultivo",disabled:f.isSelected},[(c(),b(w(u(C)("delete"))))],10,io),e("span",{class:k(["text-xs text-gray-400",{"opacity-50":f.isSelected}])},"Borrar",2)])])])],2))),128))])]))]),E(xt,{"is-visible":d.value,"crop-name":((O=s.value)==null?void 0:O.name)||"",onConfirm:I,onCancel:L},null,8,["is-visible","crop-name"])]}),_:1})}}},lo=F(ro,[["__scopeId","data-v-f76062f5"]]),ao={class:"mb-8"},co={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0"},uo={class:"text-3xl font-bold text-white"},mo={class:"text-gray-400 mt-2"},fo={__name:"CropPageHeader",props:{title:{type:String,default:"Cultivos"},description:{type:String,default:"Gestiona y configura tus cultivos para el sistema de riego automatizado"},showAddButton:{type:Boolean,default:!0}},setup(t){return(r,l)=>{const g=ne;return c(),S("div",ao,[e("div",co,[e("div",null,[e("h1",uo,p(t.title),1),e("p",mo,p(t.description),1)]),ce(r.$slots,"actions",{},()=>[t.showAddButton?(c(),b(g,{key:0,to:"/cultivos/agregar",class:"group inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold rounded-lg shadow-lg hover:from-green-600 hover:to-emerald-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 transform hover:scale-105"},{default:M(()=>l[0]||(l[0]=[e("svg",{class:"w-5 h-5 mr-2 group-hover:rotate-90 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),V(" Añadir Cultivo ")])),_:1,__:[0]})):D("",!0)])])])}}},go={},po={class:"flex justify-center items-center py-12"};function xo(t,r){return c(),S("div",po,r[0]||(r[0]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"},null,-1)]))}const yo=F(go,[["render",xo]]),bo={class:"space-y-6"},To={__name:"index",setup(t){const{toast:r}=te(),l=le(),g=ue(),x=s=>{l.setSearchFilter(s.name||""),l.setCategoryFilter(s.category==="Todas"?"":s.category||""),l.setSessionFilter(s.session||""),console.log("Filtros aplicados:",{name:s.name,category:s.category,session:s.session,soilHumidity:{min:s.minSoilHumidity,max:s.maxSoilHumidity},airHumidity:{min:s.minAirHumidity,max:s.maxAirHumidity},temperature:{max:s.maxTemperature}})},n=async({cropId:s,isSelected:i})=>{var h,v;try{if(i){const o=await l.selectCrop(s);r.success(`Cultivo "${o.data.name}" seleccionado exitosamente`)}else{const o=await l.deselectCrop(s);r.success(`Cultivo "${o.data.name}" deseleccionado exitosamente`)}}catch(o){console.error("Error al cambiar selección de cultivo:",o),r.error(((v=(h=o.response)==null?void 0:h.data)==null?void 0:v.message)||"Error al cambiar selección del cultivo")}},d=async s=>{var i,h;try{const v=l.crops.find(o=>o.id===s);if(v!=null&&v.selected){r.warning("No puedes eliminar un cultivo que está seleccionado");return}await l.deleteCrop(s),r.success(`Cultivo "${v==null?void 0:v.name}" eliminado exitosamente`)}catch(v){console.error("Error al eliminar cultivo:",v),r.error(((h=(i=v.response)==null?void 0:i.data)==null?void 0:h.message)||"Error al eliminar el cultivo")}};return me(async()=>{var s;try{if(l.isInitialized||await l.init(),(s=g.user)!=null&&s.id)try{const i=await l.fetchAllUserCrops(g.user.id);i.success&&i.data.length===0&&console.log("Usuario sin cultivos registrados")}catch(i){console.error("Error cargando cultivos del usuario:",i)}}catch(i){console.error("Error inicializando cultivos:",i)}}),q(()=>{var s;return(s=g.user)==null?void 0:s.id},async s=>{if(s&&l.isInitialized)try{const i=await l.fetchAllUserCrops(s);i.success&&i.data.length===0&&console.log("Usuario sin cultivos registrados")}catch(i){console.error("Error cargando cultivos del usuario:",i)}}),(s,i)=>(c(),S("div",bo,[E(fo),u(l).isLoading?(c(),b(yo,{key:0})):(c(),S(G,{key:1},[E(et,{"results-count":u(l).filteredCrops.length,categories:u(l).categories,onFiltersChanged:x},null,8,["results-count","categories"]),E(lo,{crops:u(l).filteredCrops,onToggleSelection:n,onDeleteCrop:d},null,8,["crops"])],64))]))}};export{To as default};
