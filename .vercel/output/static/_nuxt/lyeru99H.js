import{r as d,c as p,o as c,j as x,a as r,H as y,h as l,v as u,k as t,s as g,i as w,d as h,t as k,f}from"./Z3C1zjOC.js";import{u as V}from"./ZEFxkT7r.js";import{u as C}from"./DPZQ8nY_.js";import{U as E}from"./DnZbvBXp.js";import"./DTkYgPEM.js";import"./Dxmh1sec.js";const U={class:"space-y-8"},j={class:"bg-gray-800/50 border border-gray-700 rounded-lg p-6"},N={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},S={class:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-700"},A=["disabled"],B={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},H={__name:"agregar",setup(M){V();const{toast:m}=C(),o=d({name:"",email:"",password:"",role:"visitante",verified:!1,token:""}),a=d(!1),n=d(null),b=async()=>{try{if(a.value=!0,n.value=null,!o.value.name||!o.value.email||!o.value.password)throw new Error("Todos los campos obligatorios deben estar completos");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.value.email))throw new Error("El formato del email no es válido");if(o.value.password.length<6)throw new Error("La contraseña debe tener al menos 6 caracteres");await E.create(o.value),m.success("Usuario creado exitosamente"),await f("/admin/usuarios")}catch(i){console.error("❌ Error creando usuario:",i),n.value=i.message||"Error al crear el usuario",m.error(n.value)}finally{a.value=!1}},v=()=>{f("/admin/usuarios")};return(i,e)=>(c(),p("div",U,[e[14]||(e[14]=x('<div class="mb-8"><div class="flex items-center space-x-3 mb-2"><div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg flex items-center justify-center"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></div><div><h1 class="text-3xl font-bold text-white">Panel de Administración</h1><p class="text-gray-400">Bienvenido al centro de control del sistema Vivantia</p></div></div><div class="mt-4"><h2 class="text-xl font-semibold text-white">Añadir Usuario</h2><p class="text-gray-400 mt-1">Crear un nuevo usuario en el sistema</p></div></div>',1)),r("div",j,[r("form",{onSubmit:y(b,["prevent"]),class:"space-y-6"},[r("div",N,[r("div",null,[e[5]||(e[5]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Nombre Completo * ",-1)),l(r("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>t(o).name=s),type:"text",required:"",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ej: Juan Pérez"},null,512),[[u,t(o).name]])]),r("div",null,[e[6]||(e[6]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Email * ",-1)),l(r("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>t(o).email=s),type:"email",required:"",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ej: juan.perez@email.com"},null,512),[[u,t(o).email]])]),r("div",null,[e[7]||(e[7]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Contraseña * ",-1)),l(r("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>t(o).password=s),type:"password",required:"",minlength:"6",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Mínimo 6 caracteres"},null,512),[[u,t(o).password]]),e[8]||(e[8]=r("p",{class:"text-xs text-gray-500 mt-1"},"La contraseña debe tener al menos 6 caracteres",-1))]),r("div",null,[e[10]||(e[10]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Rol * ",-1)),l(r("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>t(o).role=s),required:"",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"},e[9]||(e[9]=[r("option",{value:"visitante"},"Visitante",-1),r("option",{value:"usuario"},"Usuario",-1),r("option",{value:"admin"},"Administrador",-1)]),512),[[g,t(o).role]])]),r("div",null,[e[12]||(e[12]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Estado de Verificación ",-1)),l(r("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>t(o).verified=s),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"},e[11]||(e[11]=[r("option",{value:!1},"No verificado",-1),r("option",{value:!0},"Verificado",-1)]),512),[[g,t(o).verified]]),e[13]||(e[13]=r("p",{class:"text-xs text-gray-500 mt-1"},"Controla si el usuario puede acceder al sistema",-1))])]),r("div",S,[r("button",{type:"button",onClick:v,class:"px-6 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-md transition-colors"}," Cancelar "),r("button",{type:"submit",disabled:t(a),class:"px-6 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-800 disabled:cursor-not-allowed text-white rounded-md transition-colors flex items-center"},[t(a)?(c(),p("div",B)):w("",!0),h(" "+k(t(a)?"Creando...":"Crear Usuario"),1)],8,A)])],32)])]))}};export{H as default};
