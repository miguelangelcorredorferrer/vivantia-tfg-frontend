import{G as S,u as V,r as b,c as t,o as l,a as s,h as d,i as m,v as p,m as c,t as f,d as _,H as E}from"./Z3C1zjOC.js";import{u as T}from"./DPZQ8nY_.js";const I={key:0,class:"text-red-500 text-sm mt-1"},N={key:0,class:"text-red-500 text-sm mt-1"},U={key:0,class:"text-red-500 text-sm mt-1"},B={key:0,class:"text-red-500 text-sm mt-1"},D=["disabled"],M={key:0},$={key:1,class:"flex items-center justify-center"},R={__name:"register",setup(h){const w=S(),x=V(),{toast:g}=T(),a=b({name:"",email:"",password:"",password_confirm:""}),r=b({}),i=b(!1),y=()=>(r.value={},a.value.name.trim()?a.value.name.length<3&&(r.value.name="El nombre debe tener al menos 3 caracteres"):r.value.name="El nombre es obligatorio",a.value.email.trim()?/\S+@\S+\.\S+/.test(a.value.email)||(r.value.email="El email no es válido"):r.value.email="El email es obligatorio",a.value.password?a.value.password.length<8&&(r.value.password="La contraseña debe tener al menos 8 caracteres"):r.value.password="La contraseña es obligatoria",a.value.password_confirm?a.value.password!==a.value.password_confirm&&(r.value.password_confirm="Las contraseñas no coinciden"):r.value.password_confirm="Confirmar contraseña es obligatorio",Object.keys(r.value).length===0),k=async()=>{var n,e;if(y())try{i.value=!0;const{password_confirm:o,...v}=a.value,C=await x.register(v);g.success(C.msg||"Cuenta creada exitosamente. Revisa tu email para verificar tu cuenta."),a.value={name:"",email:"",password:"",password_confirm:""},setTimeout(()=>{w.push("/auth/verify-email")},2e3)}catch(o){console.error("Error en registro:",o);const v=((e=(n=o.response)==null?void 0:n.data)==null?void 0:e.msg)||"Error al crear la cuenta";g.error(v)}finally{i.value=!1}},u=n=>{r.value[n]&&delete r.value[n]};return(n,e)=>(l(),t("div",null,[e[13]||(e[13]=s("div",{class:"text-center mb-6"},[s("h2",{class:"text-2xl font-bold text-gray-800 mb-2"},"Crear una cuenta"),s("p",{class:"text-gray-600"},"Únete a Vivantia IoT")],-1)),s("form",{onSubmit:E(k,["prevent"]),class:"space-y-4"},[s("div",null,[e[8]||(e[8]=s("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-1"}," Nombre completo ",-1)),d(s("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=o=>a.value.name=o),type:"text",placeholder:"Tu nombre completo",class:c(["w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",{"border-red-500":r.value.name}]),onInput:e[1]||(e[1]=o=>u("name"))},null,34),[[p,a.value.name]]),r.value.name?(l(),t("p",I,f(r.value.name),1)):m("",!0)]),s("div",null,[e[9]||(e[9]=s("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"}," Correo electrónico ",-1)),d(s("input",{id:"email","onUpdate:modelValue":e[2]||(e[2]=o=>a.value.email=o),type:"email",placeholder:"tu@email.com",class:c(["w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",{"border-red-500":r.value.email}]),onInput:e[3]||(e[3]=o=>u("email"))},null,34),[[p,a.value.email]]),r.value.email?(l(),t("p",N,f(r.value.email),1)):m("",!0)]),s("div",null,[e[10]||(e[10]=s("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-1"}," Contraseña ",-1)),d(s("input",{id:"password","onUpdate:modelValue":e[4]||(e[4]=o=>a.value.password=o),type:"password",placeholder:"Mínimo 8 caracteres",class:c(["w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",{"border-red-500":r.value.password}]),onInput:e[5]||(e[5]=o=>u("password"))},null,34),[[p,a.value.password]]),r.value.password?(l(),t("p",U,f(r.value.password),1)):m("",!0)]),s("div",null,[e[11]||(e[11]=s("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700 mb-1"}," Confirmar contraseña ",-1)),d(s("input",{id:"password_confirm","onUpdate:modelValue":e[6]||(e[6]=o=>a.value.password_confirm=o),type:"password",placeholder:"Repite tu contraseña",class:c(["w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",{"border-red-500":r.value.password_confirm}]),onInput:e[7]||(e[7]=o=>u("password_confirm"))},null,34),[[p,a.value.password_confirm]]),r.value.password_confirm?(l(),t("p",B,f(r.value.password_confirm),1)):m("",!0)]),s("button",{type:"submit",disabled:i.value,class:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[i.value?(l(),t("span",$,e[12]||(e[12]=[s("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),_(" Creando cuenta... ")]))):(l(),t("span",M,"Crear cuenta"))],8,D)],32)]))}};export{R as default};
