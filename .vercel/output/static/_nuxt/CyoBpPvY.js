import{U as S,I,r as g,q as j,c as m,o as p,a as e,j as C,k as i,t as y,H as F,h as s,d as E,v as n,s as P,J as A,i as B}from"./Z3C1zjOC.js";import{u as D}from"./ZEFxkT7r.js";import{u as H}from"./DPZQ8nY_.js";import"./DnZbvBXp.js";import"./DTkYgPEM.js";import"./Dxmh1sec.js";const N={class:"space-y-8"},T={key:0,class:"flex items-center justify-center py-12"},O={key:1,class:"space-y-6"},q={class:"bg-gray-800/50 border border-gray-600/30 rounded-lg p-6"},z={class:"flex items-center space-x-4"},L={class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center"},R={class:"text-white font-semibold"},G={class:"text-lg font-medium text-white"},J={class:"text-gray-400"},K={class:"bg-gray-800/50 border border-gray-600/30 rounded-lg p-6"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},W={class:"grid grid-cols-1 md:grid-cols-6 gap-6"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y={class:"flex items-center space-x-4"},Z={class:"flex items-center"},$={class:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-600"},ee=["disabled"],te={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},oe={key:2,class:"text-center py-12"},ue={__name:"[id]",setup(ie){const V=S(),c=I(),x=D(),{toast:d}=H(),b=V.params.id,l=g(null),f=g(!0),u=g(!1),o=g({name:"",description:"",category:"",growth_days:"",soil_humidity_min:"",soil_humidity_max:"",air_humidity_min:"",air_humidity_max:"",temperature_max:"",session:"",selected:!1});j(async()=>{try{await x.fetchAllCrops();const r=x.crops.find(t=>t.id==b);r?(l.value=r,o.value={name:r.name||"",description:r.description||"",category:r.category||"",growth_days:r.growth_days||"",soil_humidity_min:r.soil_humidity_min||"",soil_humidity_max:r.soil_humidity_max||"",air_humidity_min:r.air_humidity_min||"",air_humidity_max:r.air_humidity_max||"",temperature_max:r.temperature_max||"",session:r.session||"",selected:r.selected||!1}):(d.error("Cultivo no encontrado"),c.push("/admin/cultivos"))}catch{d.error("Error al cargar cultivo"),c.push("/admin/cultivos")}finally{f.value=!1}});const U=async()=>{try{if(u.value=!0,!o.value.name.trim()){d.error("El nombre del cultivo es obligatorio");return}const r=[];if(o.value.soil_humidity_min&&o.value.soil_humidity_max&&parseFloat(o.value.soil_humidity_min)>=parseFloat(o.value.soil_humidity_max)&&r.push("La humedad del suelo mínima debe ser menor que la máxima"),o.value.air_humidity_min&&o.value.air_humidity_max&&parseFloat(o.value.air_humidity_min)>=parseFloat(o.value.air_humidity_max)&&r.push("La humedad del aire mínima debe ser menor que la máxima"),r.length>0){d.error(r.join(`
`));return}const t={name:o.value.name.trim(),description:o.value.description.trim()||null,category:o.value.category.trim()||null,growth_days:o.value.growth_days?parseInt(o.value.growth_days):null,soil_humidity_min:o.value.soil_humidity_min?parseFloat(o.value.soil_humidity_min):null,soil_humidity_max:o.value.soil_humidity_max?parseFloat(o.value.soil_humidity_max):null,air_humidity_min:o.value.air_humidity_min?parseFloat(o.value.air_humidity_min):null,air_humidity_max:o.value.air_humidity_max?parseFloat(o.value.air_humidity_max):null,temperature_max:o.value.temperature_max?parseFloat(o.value.temperature_max):null,session:o.value.session.trim()||null,selected:o.value.selected};await CropAPI.update(b,t),await x.fetchAllCrops(),d.success("Cultivo actualizado exitosamente"),c.push("/admin/cultivos")}catch(r){console.error("Error al actualizar cultivo:",r),d.error("Error al actualizar cultivo")}finally{u.value=!1}},v=()=>{c.push("/admin/cultivos")},M=()=>{l.value&&(o.value={name:l.value.name||"",description:l.value.description||"",category:l.value.category||"",growth_days:l.value.growth_days||"",soil_humidity_min:l.value.soil_humidity_min||"",soil_humidity_max:l.value.soil_humidity_max||"",air_humidity_min:l.value.air_humidity_min||"",air_humidity_max:l.value.air_humidity_max||"",temperature_max:l.value.temperature_max||"",session:l.value.session||"",selected:l.value.selected||!1})};return(r,t)=>{var _,h,w,k;return p(),m("div",N,[e("div",{class:"mb-8"},[e("div",{class:"flex items-center justify-between"},[e("div",{class:"flex items-center space-x-3"},[e("button",{onClick:v,class:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors"},t[11]||(t[11]=[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),t[12]||(t[12]=C('<div class="w-10 h-10 bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-lg flex items-center justify-center"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></div><div><h1 class="text-3xl font-bold text-white">Editar Cultivo</h1><p class="text-gray-400">Modificar información del cultivo seleccionado</p></div>',2))])])]),i(f)?(p(),m("div",T,t[13]||(t[13]=[e("div",{class:"flex items-center space-x-2"},[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"}),e("span",{class:"text-gray-400"},"Cargando cultivo...")],-1)]))):i(l)?(p(),m("div",O,[e("div",q,[t[14]||(t[14]=e("h2",{class:"text-xl font-semibold text-white mb-4"},"Usuario Propietario",-1)),e("div",z,[e("div",L,[e("span",R,y(((h=(_=i(l).user)==null?void 0:_.name)==null?void 0:h.charAt(0).toUpperCase())||"?"),1)]),e("div",null,[e("h3",G,y(((w=i(l).user)==null?void 0:w.name)||"Usuario no encontrado"),1),e("p",J,y(((k=i(l).user)==null?void 0:k.email)||"Sin email"),1)])])]),e("div",K,[t[28]||(t[28]=e("h2",{class:"text-xl font-semibold text-white mb-6"},"Información del Cultivo",-1)),e("form",{onSubmit:F(U,["prevent"]),class:"space-y-6"},[e("div",Q,[e("div",null,[t[15]||(t[15]=e("label",{for:"name",class:"block text-sm font-medium text-gray-300 mb-2"},[E(" Nombre del Cultivo "),e("span",{class:"text-red-400"},"*")],-1)),s(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=a=>i(o).name=a),type:"text",required:"",class:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Nombre del cultivo"},null,512),[[n,i(o).name]])]),e("div",null,[t[16]||(t[16]=e("label",{for:"category",class:"block text-sm font-medium text-gray-300 mb-2"}," Categoría ",-1)),s(e("input",{id:"category","onUpdate:modelValue":t[1]||(t[1]=a=>i(o).category=a),type:"text",class:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Categoría del cultivo"},null,512),[[n,i(o).category]])])]),e("div",null,[t[17]||(t[17]=e("label",{for:"description",class:"block text-sm font-medium text-gray-300 mb-2"}," Descripción ",-1)),s(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=a=>i(o).description=a),rows:"3",class:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Descripción del cultivo"},null,512),[[n,i(o).description]])]),e("div",W,[e("div",null,[t[18]||(t[18]=e("label",{for:"growth_days",class:"block text-sm font-medium text-gray-300 mb-2"}," Días de Crecimiento ",-1)),s(e("input",{id:"growth_days","onUpdate:modelValue":t[3]||(t[3]=a=>i(o).growth_days=a),type:"number",min:"0",class:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Días"},null,512),[[n,i(o).growth_days]])]),e("div",null,[t[19]||(t[19]=e("label",{for:"soil_humidity_min",class:"block text-sm font-medium text-gray-300 mb-2"}," Humedad del Suelo Mínima (%) ",-1)),s(e("input",{id:"soil_humidity_min","onUpdate:modelValue":t[4]||(t[4]=a=>i(o).soil_humidity_min=a),type:"number",min:"0",max:"100",step:"0.1",class:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"0-100"},null,512),[[n,i(o).soil_humidity_min]])]),e("div",null,[t[20]||(t[20]=e("label",{for:"soil_humidity_max",class:"block text-sm font-medium text-gray-300 mb-2"}," Humedad del Suelo Máxima (%) ",-1)),s(e("input",{id:"soil_humidity_max","onUpdate:modelValue":t[5]||(t[5]=a=>i(o).soil_humidity_max=a),type:"number",min:"0",max:"100",step:"0.1",class:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"0-100"},null,512),[[n,i(o).soil_humidity_max]])]),e("div",null,[t[21]||(t[21]=e("label",{for:"air_humidity_min",class:"block text-sm font-medium text-gray-300 mb-2"}," Humedad del Aire Mínima (%) ",-1)),s(e("input",{id:"air_humidity_min","onUpdate:modelValue":t[6]||(t[6]=a=>i(o).air_humidity_min=a),type:"number",min:"0",max:"100",step:"0.1",class:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"0-100"},null,512),[[n,i(o).air_humidity_min]])]),e("div",null,[t[22]||(t[22]=e("label",{for:"air_humidity_max",class:"block text-sm font-medium text-gray-300 mb-2"}," Humedad del Aire Máxima (%) ",-1)),s(e("input",{id:"air_humidity_max","onUpdate:modelValue":t[7]||(t[7]=a=>i(o).air_humidity_max=a),type:"number",min:"0",max:"100",step:"0.1",class:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"0-100"},null,512),[[n,i(o).air_humidity_max]])]),e("div",null,[t[23]||(t[23]=e("label",{for:"temperature_max",class:"block text-sm font-medium text-gray-300 mb-2"}," Temperatura Máxima (°C) ",-1)),s(e("input",{id:"temperature_max","onUpdate:modelValue":t[8]||(t[8]=a=>i(o).temperature_max=a),type:"number",min:"-50",max:"100",step:"0.1",class:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Temperatura"},null,512),[[n,i(o).temperature_max]])])]),e("div",X,[e("div",null,[t[25]||(t[25]=e("label",{for:"session",class:"block text-sm font-medium text-gray-300 mb-2"}," Sesión de Cultivo ",-1)),s(e("select",{id:"session","onUpdate:modelValue":t[9]||(t[9]=a=>i(o).session=a),class:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"},t[24]||(t[24]=[C('<option value="">Seleccionar temporada...</option><option value="Primavera">Primavera</option><option value="Verano">Verano</option><option value="Otoño">Otoño</option><option value="Invierno">Invierno</option><option value="Primavera/Verano">Primavera/Verano</option><option value="Verano/Otoño">Verano/Otoño</option><option value="Otoño/Invierno">Otoño/Invierno</option><option value="Invierno/Primavera">Invierno/Primavera</option><option value="Todo el año">Todo el año</option>',10)]),512),[[P,i(o).session]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Estado de Selección ",-1)),e("div",Y,[e("label",Z,[s(e("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>i(o).selected=a),type:"checkbox",class:"w-4 h-4 text-green-600 bg-gray-700 border-gray-600 rounded focus:ring-green-500 focus:ring-2"},null,512),[[A,i(o).selected]]),t[26]||(t[26]=e("span",{class:"ml-2 text-white"},"Cultivo seleccionado",-1))])])])]),e("div",$,[e("button",{type:"button",onClick:M,class:"px-6 py-2 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors"}," Restaurar "),e("button",{type:"button",onClick:v,class:"px-6 py-2 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors"}," Cancelar "),e("button",{type:"submit",disabled:i(u),class:"px-6 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-800 text-white font-medium rounded-lg transition-colors flex items-center space-x-2"},[i(u)?(p(),m("div",te)):B("",!0),e("span",null,y(i(u)?"Guardando...":"Guardar Cambios"),1)],8,ee)])],32)])])):(p(),m("div",oe,[e("div",{class:"text-gray-400"},[t[29]||(t[29]=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1)),t[30]||(t[30]=e("p",{class:"text-lg font-medium"},"Cultivo no encontrado",-1)),t[31]||(t[31]=e("p",{class:"text-sm"},"El cultivo que buscas no existe o ha sido eliminado",-1)),e("button",{onClick:v,class:"mt-4 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors"}," Volver a la lista ")])]))])}}};export{ue as default};
