import{u as E}from"./DPZQ8nY_.js";import{U as k}from"./DnZbvBXp.js";import{c as g,o as f,a as e,t as x,d as N,r as h,g as P,h as w,v as y,i as _,j as $,u as L,b as v,k as p,f as C}from"./Z3C1zjOC.js";const T={class:"bg-gray-800 rounded-lg p-6 border border-gray-700"},A={class:"flex items-center space-x-4 mb-6"},S={class:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center"},U={class:"text-white font-bold text-2xl"},I={class:"text-xl font-semibold text-white"},z={class:"text-gray-400"},V={__name:"UserInfo",props:{userName:{type:String,required:!0},userEmail:{type:String,required:!0}},setup(a){return(d,s)=>{var r,t;return f(),g("div",T,[e("div",A,[e("div",S,[e("span",U,x(((t=(r=a.userName)==null?void 0:r.charAt(0))==null?void 0:t.toUpperCase())||"U"),1)]),e("div",null,[e("h2",I,x(a.userName),1),e("p",z,x(a.userEmail),1),s[0]||(s[0]=e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 mt-2"},[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),N(" Cuenta verificada ")],-1))])])])}}},j={class:"bg-gray-800 rounded-lg p-6 border border-gray-700"},B={key:0,class:"flex items-center justify-between"},M={class:"text-white font-medium"},D={key:1,class:"space-y-4"},R={class:"flex space-x-3"},G=["disabled"],q={__name:"NameEditor",props:{currentName:{type:String,required:!0},isLoading:{type:Boolean,default:!1}},emits:["save-name","cancel"],setup(a,{emit:d}){const s=a,r=d,t=h(!1),u=P({name:s.currentName||""}),m=()=>{u.name=s.currentName||"",t.value=!0},n=()=>{u.name=s.currentName||"",t.value=!1,r("cancel")},b=()=>{u.name.trim()&&(r("save-name",u.name),t.value=!1)};return(o,l)=>(f(),g("div",j,[l[3]||(l[3]=e("h3",{class:"text-lg font-semibold text-white mb-4"},"Nombre de perfil",-1)),t.value?(f(),g("div",D,[e("div",null,[l[2]||(l[2]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Nuevo nombre",-1)),w(e("input",{"onUpdate:modelValue":l[0]||(l[0]=c=>u.name=c),type:"text",class:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tu nuevo nombre"},null,512),[[y,u.name]])]),e("div",R,[e("button",{onClick:b,disabled:a.isLoading,class:"px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white rounded-lg transition-colors"},x(a.isLoading?"Guardando...":"Guardar"),9,G),e("button",{onClick:n,class:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors"}," Cancelar ")])])):(f(),g("div",B,[e("div",null,[e("p",M,x(a.currentName),1),l[1]||(l[1]=e("p",{class:"text-gray-400 text-sm"},"Este es tu nombre de visualización en la aplicación",-1))]),e("button",{onClick:m,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"}," Cambiar nombre ")]))]))}},F={class:"bg-gray-800 rounded-lg p-6 border border-gray-700"},O={key:0,class:"flex items-center justify-between"},H={key:1,class:"space-y-4"},K={class:"flex space-x-3"},J=["disabled"],Q={__name:"PasswordEditor",props:{isLoading:{type:Boolean,default:!1}},emits:["save-password","cancel"],setup(a,{emit:d}){const s=d,r=h(!1),t=P({currentPassword:"",newPassword:"",confirmPassword:""}),u=()=>{t.currentPassword="",t.newPassword="",t.confirmPassword="",r.value=!0},m=()=>{t.currentPassword="",t.newPassword="",t.confirmPassword="",r.value=!1,s("cancel")},n=()=>{!t.currentPassword||!t.newPassword||!t.confirmPassword||t.newPassword===t.confirmPassword&&(t.newPassword.length<6||(s("save-password",{currentPassword:t.currentPassword,newPassword:t.newPassword}),r.value=!1))};return(b,o)=>(f(),g("div",F,[o[7]||(o[7]=e("h3",{class:"text-lg font-semibold text-white mb-4"},"Contraseña",-1)),r.value?(f(),g("div",H,[e("div",null,[o[4]||(o[4]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Contraseña actual",-1)),w(e("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>t.currentPassword=l),type:"password",class:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tu contraseña actual"},null,512),[[y,t.currentPassword]])]),e("div",null,[o[5]||(o[5]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Nueva contraseña",-1)),w(e("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>t.newPassword=l),type:"password",class:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tu nueva contraseña"},null,512),[[y,t.newPassword]])]),e("div",null,[o[6]||(o[6]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Confirmar nueva contraseña",-1)),w(e("input",{"onUpdate:modelValue":o[2]||(o[2]=l=>t.confirmPassword=l),type:"password",class:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Confirma tu nueva contraseña"},null,512),[[y,t.confirmPassword]])]),e("div",K,[e("button",{onClick:n,disabled:a.isLoading,class:"px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white rounded-lg transition-colors"},x(a.isLoading?"Guardando...":"Actualizar contraseña"),9,J),e("button",{onClick:m,class:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors"}," Cancelar ")])])):(f(),g("div",O,[o[3]||(o[3]=e("div",null,[e("p",{class:"text-white font-medium"},"••••••••"),e("p",{class:"text-gray-400 text-sm"},"Última actualización hace tiempo")],-1)),e("button",{onClick:u,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"}," Cambiar contraseña ")]))]))}},W={class:"bg-gray-800 rounded-lg p-6 border border-gray-700"},X={__name:"AccountActions",emits:["logout","confirm-delete"],setup(a,{emit:d}){const s=d,r=()=>{s("logout")},t=()=>{s("confirm-delete")};return(u,m)=>(f(),g("div",W,[m[2]||(m[2]=e("h3",{class:"text-lg font-semibold text-white mb-4"},"Acciones de cuenta",-1)),e("div",{class:"space-y-4"},[e("div",{class:"flex items-center justify-between p-4 bg-gray-700 rounded-lg"},[m[0]||(m[0]=e("div",null,[e("p",{class:"text-white font-medium"},"Cerrar sesión"),e("p",{class:"text-gray-400 text-sm"},"Salir de tu cuenta en este dispositivo")],-1)),e("button",{onClick:r,class:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-colors"}," Cerrar sesión ")]),e("div",{class:"flex items-center justify-between p-4 bg-red-500/10 border border-red-500/20 rounded-lg"},[m[1]||(m[1]=e("div",null,[e("p",{class:"text-red-400 font-medium"},"Eliminar cuenta"),e("p",{class:"text-gray-400 text-sm"},"Esta acción es irreversible y eliminará todos tus datos")],-1)),e("button",{onClick:t,class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors"}," Eliminar cuenta ")])])]))}},Y={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},Z={class:"bg-gray-800 rounded-lg p-6 w-full max-w-md"},ee={class:"space-y-4"},te={class:"flex space-x-3 mt-6"},se=["disabled"],re={__name:"DeleteAccountModal",props:{show:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},emits:["delete-account","cancel"],setup(a,{emit:d}){const s=d,r=P({confirmText:"",password:""}),t=()=>{r.confirmText==="ELIMINAR"&&r.password&&s("delete-account",{confirmText:r.confirmText,password:r.password})},u=()=>{r.confirmText="",r.password="",s("cancel")};return(m,n)=>a.show?(f(),g("div",Y,[e("div",Z,[n[4]||(n[4]=$('<div class="text-center mb-6"><div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><h3 class="text-lg font-semibold text-white mb-2">¿Eliminar cuenta?</h3><p class="text-gray-400 text-sm">Esta acción es irreversible. Todos tus datos, dispositivos y configuraciones se perderán permanentemente.</p></div>',1)),e("div",ee,[e("div",null,[n[2]||(n[2]=e("label",{class:"block text-sm font-medium text-white mb-2"},' Escribe "ELIMINAR" para confirmar ',-1)),w(e("input",{"onUpdate:modelValue":n[0]||(n[0]=b=>r.confirmText=b),type:"text",class:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"ELIMINAR"},null,512),[[y,r.confirmText]])]),e("div",null,[n[3]||(n[3]=e("label",{class:"block text-sm font-medium text-white mb-2"},"Confirma tu contraseña",-1)),w(e("input",{"onUpdate:modelValue":n[1]||(n[1]=b=>r.password=b),type:"password",class:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Tu contraseña actual"},null,512),[[y,r.password]])])]),e("div",te,[e("button",{onClick:t,disabled:a.isLoading,class:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-600 text-white rounded-lg transition-colors"},x(a.isLoading?"Eliminando...":"Eliminar definitivamente"),9,se),e("button",{onClick:u,class:"flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors"}," Cancelar ")])])])):_("",!0)}},oe={class:"space-y-8"},ie={__name:"perfil",setup(a){const d=L(),{showToast:s}=E(),r=h(!1),t=h(!1),u=async c=>{if(!c.trim()){s("El nombre no puede estar vacío","error");return}t.value=!0;try{console.log("Cambiar nombre a:",c),s("Nombre actualizado exitosamente","success")}catch(i){console.error("Error actualizando nombre:",i),s(i.message||"Error al actualizar nombre","error")}finally{t.value=!1}},m=async c=>{if(!c.currentPassword||!c.newPassword){s("Todos los campos son obligatorios","error");return}if(c.newPassword.length<6){s("La nueva contraseña debe tener al menos 6 caracteres","error");return}t.value=!0;try{await d.changePassword({currentPassword:c.currentPassword,newPassword:c.newPassword}),s("Contraseña actualizada exitosamente","success")}catch(i){console.error("Error actualizando contraseña:",i),s(i.message||"Error al actualizar contraseña","error")}finally{t.value=!1}},n=async()=>{await d.logout(),C("/auth/login")},b=()=>{r.value=!0},o=()=>{r.value=!1},l=async c=>{if(c.confirmText!=="ELIMINAR"){s('Debes escribir "ELIMINAR" para confirmar',"error");return}if(!c.password){s("Debes introducir tu contraseña","error");return}t.value=!0;try{const i=await k.deleteOwnAccount(c.password);i.success?(r.value=!1,s("Cuenta eliminada exitosamente","success"),d.logout(),localStorage.removeItem("AUTH_TOKEN"),localStorage.removeItem("user"),sessionStorage.clear(),setTimeout(async()=>{await C("/auth/register",{replace:!0})},1500)):s(i.message||"Error al eliminar cuenta","error")}catch(i){console.error("Error eliminando cuenta:",i),i.status===401?s("Contraseña incorrecta","error"):i.status===404?s("Usuario no encontrado","error"):s(i.message||"Error al eliminar cuenta","error")}finally{t.value=!1}};return(c,i)=>(f(),g("div",oe,[i[0]||(i[0]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-white"},"Perfil de Usuario"),e("p",{class:"text-gray-400 mt-2"},"Gestiona tu cuenta y configuración personal")],-1)),v(p(V),{"user-name":p(d).userName,"user-email":p(d).userEmail},null,8,["user-name","user-email"]),v(p(q),{"current-name":p(d).userName,"is-loading":t.value,onSaveName:u,onCancel:()=>{}},null,8,["current-name","is-loading"]),v(p(Q),{"is-loading":t.value,onSavePassword:m,onCancel:()=>{}},null,8,["is-loading"]),v(p(X),{onLogout:n,onConfirmDelete:b}),v(p(re),{show:r.value,"is-loading":t.value,onDeleteAccount:l,onCancel:o},null,8,["show","is-loading"])]))}};export{ie as default};
